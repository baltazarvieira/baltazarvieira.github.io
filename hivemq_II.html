<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Controle LED MQTT</title>

<script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>

<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #f2f2f2;
    margin-top: 50px;
  }
  button {
    width: 150px;
    height: 50px;
    font-size: 20px;
    margin: 10px;
  }
</style>
</head>

<body>

<h2>Controle Remoto do LED</h2>

<button onclick="ligar()">LIGAR</button>
<button onclick="desligar()">DESLIGAR</button>

<p id="status">Conectando ao MQTT...</p>

<script>
  // ===== CONFIGURAÇÃO MQTT =====
  const options = {
    username: "baltazarvieira",
    password: "ZAQmko1968",
    clean: true,
    reconnectPeriod: 2000
  };

  const client = mqtt.connect(
    "wss://5123f02098764d0885f1db6e2d8fcab5.s1.eu.hivemq.cloud:8884/mqtt",
    options
  );

  const TOPICO = "casa/lampada3";

  client.on("connect", () => {
    document.getElementById("status").innerText = "Conectado ao MQTT ✔";
  });

  client.on("error", (err) => {
    document.getElementById("status").innerText = "Erro MQTT ❌";
    console.error(err);
  });

  function ligar() {
    client.publish(TOPICO, "ON");
  }

  function desligar() {
    client.publish(TOPICO, "OFF");
  }
</script>

</body>
</html>
